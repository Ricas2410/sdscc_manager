<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Financial Report - {{ period_label }}</title>
    <style>
        @page { size: A4; margin: 2cm; }
        body { font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; color: #333; }
        .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #1e40af; padding-bottom: 20px; }
        .header h1 { color: #1e40af; margin: 0 0 5px 0; font-size: 24px; }
        .header h2 { color: #374151; margin: 0; font-size: 16px; font-weight: normal; }
        .meta { display: flex; justify-content: space-between; margin-bottom: 20px; font-size: 11px; color: #6b7280; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { padding: 10px 8px; text-align: left; border-bottom: 1px solid #e5e7eb; }
        th { background-color: #f3f4f6; font-weight: bold; color: #374151; }
        .amount { text-align: right; font-family: monospace; }
        .positive { color: #059669; }
        .negative { color: #dc2626; }
        .total-row { background-color: #1e40af; color: white; font-weight: bold; }
        .total-row td { border: none; }
        .summary { margin-top: 30px; padding: 15px; background-color: #f0f9ff; border-radius: 8px; }
        .summary h3 { margin: 0 0 10px 0; color: #1e40af; }
        .summary-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; }
        .summary-item { text-align: center; }
        .summary-item .value { font-size: 18px; font-weight: bold; }
        .summary-item .label { font-size: 11px; color: #6b7280; }
        .footer { margin-top: 40px; padding-top: 20px; border-top: 1px solid #e5e7eb; font-size: 10px; color: #9ca3af; text-align: center; }
    </style>
</head>
<body>
    <div class="header">
        <h1>{{ site_settings.church_name|default:'Church' }}</h1>
        <h2>Financial Report - {{ report_level|title }} Level</h2>
        <p style="margin: 10px 0 0 0; font-size: 14px;">{{ period_label }}</p>
    </div>

    <div class="meta">
        <span>Generated: {{ generated_date|date:"F d, Y H:i" }}</span>
        <span>Generated by: {{ generated_by }}</span>
    </div>

    <table>
        <thead>
            <tr>
                <th>{{ report_level|title }}</th>
                <th class="amount">Contributions</th>
                <th class="amount">Expenditure</th>
                <th class="amount">Net Balance</th>
            </tr>
        </thead>
        <tbody>
            {% for report in reports %}
            <tr>
                <td>{{ report.entity_name }}</td>
                <td class="amount positive">GH₵ {{ report.total_contributions|floatformat:2 }}</td>
                <td class="amount negative">GH₵ {{ report.total_expenditure|floatformat:2 }}</td>
                <td class="amount {% if report.net_balance >= 0 %}positive{% else %}negative{% endif %}">
                    GH₵ {{ report.net_balance|floatformat:2 }}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4" style="text-align: center; color: #9ca3af;">No data available for this period</td>
            </tr>
            {% endfor %}
            {% if reports %}
            <tr class="total-row">
                <td>TOTAL</td>
                <td class="amount">GH₵ {{ total_contributions|floatformat:2 }}</td>
                <td class="amount">GH₵ {{ total_expenditure|floatformat:2 }}</td>
                <td class="amount">GH₵ {{ total_balance|floatformat:2 }}</td>
            </tr>
            {% endif %}
        </tbody>
    </table>

    <div class="summary">
        <h3>Summary</h3>
        <div class="summary-grid">
            <div class="summary-item">
                <div class="value positive">GH₵ {{ total_contributions|floatformat:2 }}</div>
                <div class="label">Total Contributions</div>
            </div>
            <div class="summary-item">
                <div class="value negative">GH₵ {{ total_expenditure|floatformat:2 }}</div>
                <div class="label">Total Expenditure</div>
            </div>
            <div class="summary-item">
                <div class="value {% if total_balance >= 0 %}positive{% else %}negative{% endif %}">GH₵ {{ total_balance|floatformat:2 }}</div>
                <div class="label">Net Balance</div>
            </div>
        </div>
    </div>

    <div class="footer">
        <p>This is a computer-generated report. No signature required.</p>
        <p>{{ site_settings.church_name|default:'Church Management System' }}</p>
    </div>
</body>
</html>

